jQuery.fn.smarten=function(){return this.each(function(){!function smartenNode(node){if(3===node.nodeType)node.data=node.data.replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/---/g,"—").replace(/--/g,"–").replace(/\.{3}/g,"…");else if(1===node.nodeType&&(node=node.firstChild))for(;smartenNode(node),node=node.nextSibling;);}(this)})};